params {
    adapter_trimming = true
}

outputDir = 'results'

process {
    executor = 'slurm'

    withName: adapters_trimming {
        queue = "express"
        memory = "2.GB"
        cpus = params.trimmomatic.threads
        time = "1.h"
    }

    withName: fastQC_post_trimming {
        queue = "express"
        cpus =  params.fastQC.threads
        time =  "2.h"
    }

    withName: fastQC_raw_data {
        queue = "express"
        time =  "2.h"
    }

    withName: multiQC_post_trimming {
        queue = "express"
        cpus =  params.fastQC.threads
        time =  "2.h"
    }

    withName: multiQC_raw_data {
        queue = "express"
        cpus =  params.fastQC.threads
        time =  "2.h"
    }

    withName: star_and_RSEM_index_building {
        queue = "batch"
        cpus = params.index_building.threads
        time = "8.h"
        memory = "30.GB"
    }

    withName: star_alignment {
        queue = "long"
        memory = "58.GB"
        cpus = params.STAR.threads
        time = "2 days 20 hours"
    }

    withName: star_alignment_no_adapter_trimming {
        queue = "long"
        memory = "60.GB"
        cpus = params.STAR.threads
        time = "2 days 20 hours"
    }

    withName: qc_post_alignment {
        queue = "express"
        time = "2.h"
    }

    withName: rsem_transcript_quantification {
        queue = "batch"
        memory = "30.GB"
        cpus = params.rsem.threads
        time = "4.h"
    }
}

profiles {
    slurm {
        process.executor = 'slurm'
    }
    local {
        process.executor = 'local'
    }
}